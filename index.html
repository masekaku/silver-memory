<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penayangan Video Responsif</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: sans-serif;
            flex-direction: column;
        }

        .video-container {
            position: relative;
            width: 90%;
            max-width: 1200px;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .video-container::before {
            content: '';
            display: block;
            padding-top: 56.25%; /* Rasio aspek 16:9 */
        }

        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .loading-message {
            text-align: center;
            color: #777;
            margin-top: 20px;
            font-style: italic;
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .video-container {
                width: 95%;
            }
            h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <h1>Video Demonstrasi Responsif</h1>
    <p class="loading-message" id="loadingMessage">Memuat video...</p>
    <div class="video-container">
        <video controls playsinline id="mainVideo">
            Maaf, browser Anda tidak mendukung tag video.
        </video>
    </div>
    <p style="text-align: center; margin-top: 20px; color: #555;">
        Video ini akan secara otomatis menyesuaikan ukurannya dengan lebar layar Anda.
    </p>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoElement = document.getElementById('mainVideo');
            const loadingMessage = document.getElementById('loadingMessage');
            const cdnBaseUrl = "https://cdn.videy.co/"; 

            // Dapatkan parameter URL
            const urlParams = new URLSearchParams(window.location.search);
            const requestedVideoId = urlParams.get('videoID'); // Mengambil nilai dari parameter 'videoID'

            fetch('video_data.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    let selectedVideoId = null;

                    if (data.videos && data.videos.length > 0) {
                        // Jika ada ID video yang diminta dari URL
                        if (requestedVideoId) {
                            // Cari video berdasarkan ID yang diminta
                            const foundVideo = data.videos.find(video => video.id === requestedVideoId);
                            if (foundVideo) {
                                selectedVideoId = foundVideo.id;
                            } else {
                                console.warn(`Video dengan ID '${requestedVideoId}' tidak ditemukan di JSON. Memuat video pertama.`);
                                selectedVideoId = data.videos[0].id; // Fallback ke video pertama
                            }
                        } else {
                            // Jika tidak ada ID yang diminta, muat video pertama (atau acak jika Anda mau)
                            selectedVideoId = data.videos[0].id; // Mengambil ID video pertama sebagai default
                            // Untuk acak lagi:
                            // const randomIndex = Math.floor(Math.random() * data.videos.length);
                            // selectedVideoId = data.videos[randomIndex].id;
                        }

                        if (selectedVideoId) {
                            const videoUrl = cdnBaseUrl + selectedVideoId + ".mp4"; 
                            videoElement.innerHTML = `<source src="${videoUrl}" type="video/mp4">`;
                            videoElement.load();
                            loadingMessage.style.display = 'none';
                        } else {
                            loadingMessage.textContent = 'Error: Tidak ada video untuk ditampilkan.';
                            console.error('Tidak ada video yang valid untuk ditampilkan.');
                        }

                    } else {
                        loadingMessage.textContent = 'Error: Tidak ada video ditemukan di JSON.';
                        console.error('Array videos kosong atau tidak ada dalam file JSON.');
                    }
                })
                .catch(error => {
                    loadingMessage.textContent = `Gagal memuat video: ${error.message}`;
                    console.error('Terjadi kesalahan saat mengambil data JSON:', error);
                });
        });
    </script>
</body>
</html>